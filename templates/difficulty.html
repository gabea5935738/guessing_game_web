<!DOCTYPE html>
<html>
<head>
    <title>Select Difficulty</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        button, button:focus, button:active, button:focus-visible {
            outline: none !important;
            box-shadow: none !important;
            border: none !important;
            background: none;
        }
        button:focus {
            outline: none;
            box-shadow: none;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>Select Difficulty</h1>
        <form method="POST" autocomplete="off">
            <select name="difficulty" id="difficulty" onchange="showCustom()" style="margin-bottom:0.7em;">
                <option value="easy">Easy (1-10, 3 guesses)</option>
                <option value="medium">Medium (1-50, 5 guesses)</option>
                <option value="hard">Hard (1-100, 10 guesses)</option>
                <option value="custom">Custom</option>
            </select>
            <div id="custom-range" style="display:none; margin-top:0.5em;">
                <label>Min: <input type="number" name="min_num" value="1" min="1" required></label>
                <label>Max: <input type="number" name="max_num" value="100" min="1" required></label>
                <label>Max Guesses: <input type="number" name="max_attempts" value="10" min="1" required></label>
            </div>
            <button type="submit" class="begin-btn"></button>
        </form>
    </div>
    <script>
        function showCustom() {
            var diff = document.getElementById('difficulty').value;
            document.getElementById('custom-range').style.display = (diff === 'custom') ? 'block' : 'none';
        }
        document.getElementById('difficulty').addEventListener('change', showCustom);
        window.onload = showCustom;
    </script>
    {% if session.get('debug') %}
            <div id="debug-panel">
                <strong>DEBUG MODE ON</strong><br>
        <form method="post" action="/set_var" style="margin:1em 0;">
            <input type="text" name="assignment" placeholder="var = value" required style="width:120px;">
            <button type="submit">Set Variable</button>
        </form>
                <form method="post" action="/force_next_round" style="margin:1em 0;">
                        <button type="submit">Force Next Round</button>
                </form>
                <form method="post" action="/goto_page" style="margin:1em 0;">
                        <input type="text" name="page" placeholder="Route (e.g. /, /game)" required>
                        <button type="submit">Go To Page</button>
                </form>
                <pre>{{ session | pprint }}</pre>
                <div style="margin-top:1em; background:#222; color:#fff; padding:0.7em; border-radius:8px;">
                    <strong>All Routes:</strong>
                    <ul style="font-size:0.97em; margin:0; padding-left:1.2em;">
                        {% for route in all_routes %}
                            <li><code>{{ route.rule }}</code> ({{ route.methods }}) &rarr; <b>{{ route.endpoint }}</b></li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            <script>
                function updateDebugScore() {
                        fetch("/idle_score").then(r => r.json()).then(data => {
                                let debugScore = document.getElementById("debug-live-score");
                                if (debugScore) debugScore.textContent = "Score: " + data.score;
                        });
                }
                setInterval(updateDebugScore, 1000);
            </script>
    {% endif %}
</body>
</html>